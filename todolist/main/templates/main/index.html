{% extends 'base.html' %}
{% load static %}

{% block title %}To do list{% endblock title %}

{% block styles %}
	<link rel="stylesheet" href="{% static 'css/styles.css' %}">
{% endblock styles %}

{% block content %}
	<div class="main__todolist">
		<header class="header">
			<div class="container">
				<div class="d-flex flex-column flex-md-row p-3 gap-4 py-md-5 align-items-center justify-content-center">
					<div class="list-group pb-15 w-100">

						<!-- Page Title -->
						<h1 class="note">All tasks</h1>

						<!-- Tasks -->
						{% for task in tasks %}
						<a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
							<button class="btn__orange rounded-circle" id="btn-delete-note" onclick="deleteNote">
								<div class="orange__circle"></div>
								<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="checkmate">
									<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5056 9.00958C16.2128 8.71668 15.7379 8.71668 15.445 9.00958L10.6715 13.7831L8.72649 11.8381C8.43359 11.5452 7.95872 11.5452 7.66583 11.8381C7.37294 12.1309 7.37293 12.6058 7.66583 12.8987L10.1407 15.3736C10.297 15.5299 10.5051 15.6028 10.7097 15.5923C10.8889 15.5833 11.0655 15.5104 11.2023 15.3735L16.5056 10.0702C16.7985 9.77735 16.7985 9.30247 16.5056 9.00958Z" fill="currentColor"></path>
								</svg>
							</button>
							<div class="d-flex gap-2 w-100 justify-content-between">
								<div class="task_inner">
									<div class="task_header">

										<!-- Title -->
										<h6 class="mb-0">{{ task.title }}</h6>

										<!-- Categories -->
										<h6>
											{% if task.categories.all %} 
												<span class="badge text-bg-warning" id="categoryID"> 
													{% for category in task.categories.all %} 
														{{category.title }} 
													{% endfor %}
												</span>
											{% endif %} 
										</h6>

										<!-- High priority flag -->
										<div class="task_flag">
											{% if task.is_high_priority %}
												<i class="bi bi-flag-fill"></i>
											{% else %}
												<i class="bi bi-flag"></i>
											{% endif %}
										</div>
									</div>

									<!-- Description -->
									<div class="task_text">
										<p class="mb-0 opacity-75">{{ task.text }}</p>
									</div>

									<!-- Due date -->
									<div class="task_date">
										<div class="note_path">{% if task.project %} {{ task.project }} {% endif %}</div>
										{{ task.due_date|date:"d.m" }}
									</div>

								</div>
							</div>
						</a>
						{% endfor %}

						<!-- Task creation form -->
						<div class="mt-3" id="content_window">
							<div class="list-group">
								<form class="note-form">
									<div class="container">

										<!-- Close button -->
										<div class="close_form_btn">
											<div id="btn_add" onclick="closeWindow()">
												<button type="button" aria-hidden="false" data-supports-active-task="true" class="close_add_button">
													<span class="icon_close" aria-hidden="true">
														<svg width="13" height="13">
															<path fill="currentColor" fill-rule="evenodd" d="M6 6V.5a.5.5 0 0 1 1 0V6h5.5a.5.5 0 1 1 0 1H7v5.5a.5.5 0 1 1-1 0V7H.5a.5.5 0 0 1 0-1H6z"></path>
														</svg>
													</span>
												</button>
											</div>
										</div>

										<!-- Note Title -->
										<div class="note_title">
											<input class="form-control form-control-sm my-2 note-title" type="text" placeholder="Note Title" required="" aria-label=".form-control-sm">
										</div>
										
										<!-- Note Text -->
										<div class="mb-1">
											<label for="exampleFormControlTextarea1" class="form-label note-text">Note Text:</label>
											<textarea class="form-control" id="exampleFormControlTextarea1" required="" rows="3"></textarea>
										</div>

										<!-- Project selector -->
										<div class="datalists-chose">
											<div class="datalists-item">
												<div class="projects-datalist d-flex">
													<span class="py-1 mx-3"> Chose project </span>
													<input class="form-control" list="datalistProjects" id="DataListProjects" placeholder="your project">
													<datalist id="datalistProjects">
														<!-- Список с нашими категориями-->
														<option value="Project 1 "></option>
														<option value="Project 2 "></option>
														<option value="Project 3 "></option>
														<option value="Project 4 "></option>
													</datalist>
												</div>
											</div>

											<!-- Category selector -->
											<div class="datalists-item">
												<div class="categories-datalist d-flex">
													<span class="py-1 mx-3"> Chose category </span>
													<input class="form-control" list="datalistCategories" id="DataListCategories" placeholder="No category">
													<datalist id="datalistCategories">
														<!-- Список с нашими категориями-->
														<option value="Category 1 "></option>
														<option value="Category 2 "></option>
														<option value="Category 3 "></option>
														<option value="Category 4 "></option>
													</datalist>
												</div>
											</div>

											<!-- High priority flag -->
											<div class="datalists-item w-20">
												<div class="form-check text-start d-flex w-50">
													<div class="checkbox_inner py-2">
														<input class="form-check-input" type="checkbox" value="remember-me" id="flexCheckDefault" onclick="SwitchFlag()">
														<label class="form-check-label d-flex" for="flexCheckDefault">
															Is High Priority
															<i class="bi bi-flag-fill falg-checbox px-2"></i>
														</label>
													</div>
												</div>
											</div>

											<!-- Calendar or Date select-->
											<div class="datalists-item">
												<div class="field-due_date date-menu">
													<div>
														<div id="start">
															<input type="date" id="start_1" name="trip-start" value="2025-01-21">
														</div>
													</div>
												</div>
											</div>
										</div>
										
										<!-- Add note (submit) button -->
										<button class="btn btn-warning w-100 py-2 btn-add-final opacity-75" type="submit">Add note</button>
									</div>
								</form>
							</div>
						</div>

						<!-- Add note button -->
						<div class="plus_add_button_inner">
							<div id="btn_add" onclick="showWindow()">
								<button type="button" aria-hidden="false" data-supports-active-task="true" class="plus_add_button">
									<span class="icon_add" aria-hidden="true">
										<svg width="13" height="13">
											<path fill="currentColor" fill-rule="evenodd" d="M6 6V.5a.5.5 0 0 1 1 0V6h5.5a.5.5 0 1 1 0 1H7v5.5a.5.5 0 1 1-1 0V7H.5a.5.5 0 0 1 0-1H6z"></path>
										</svg>
									</span>
									<div class="penis">Add note</div>
								</button>
							</div>
						</div>

					</div>
				</div>
			</div>
		</header>
	</div>
{% endblock content %}

{% block scripts %}
	<script src="{% static 'js/script.js' %}"></script>
{% endblock scripts %}