{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todolist</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  </head>

<body>
    <div class="todolist__page">
        <div class="page__inner">
            <div class="sidebar__todolist">
                <div class="container">
                    <div class="flex-shrink-0 p-3" style="width: 280px;">
                        <div class="account"> <!-- Аккаунт-->
                            <a href="#" class="d-flex align-items-center text-black text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="https://upload.wikimedia.org/wikipedia/en/c/c7/Chill_guy_original_artwork.jpg" alt="" width="32" height="32" class="rounded-circle me-2">
                                <strong>name</strong>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
                                <li><a class="dropdown-item" href="#">New project..</a></li> <
                                <li><a class="dropdown-item" href="#">Settings</a></li>
                                <li><a class="dropdown-item" href="#">Profile</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <form method="post" class="dropdown-item" action="{% url 'logout' %}">
                                        {% csrf_token %}
                                        <button type="submit" style="background: none; border: none; padding: 0; margin: 0; color: inherit; text-align: left; cursor: pointer;">Sign out</button>
                                    </form>
                                </li>
                            </ul>
                        </div>


                        <ul class="list-unstyled ps-0">
                            <li class="mb-1">
                                <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="false">
                                    Home
                                </button>
                            <div class="collapse" id="home-collapse" style="">
                                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                    <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Account</a></li>
                                    <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Settings</a></li>
                                    <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Documentary</a></li>
                                </ul>
                            </div>
                            </li>

                            <li class="border-top my-3"></li>
                            <li class="mb-1">
                                <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#account-collapse" aria-expanded="false">
                                    My Projects
                                </button>
                                <div class="collapse" id="account-collapse" style="">
                                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                        {% for project in projects %}
                                            <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">{{ project.title }}</a></li>
                                        {% endfor %}
                                        <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">+ Create new project</a></li> <!-- Кнопка Добавления новой заметки-->
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>


            <div class="main__todolist">
                <header class="header">
                    <div class="container">
                        <div class="d-flex flex-column flex-md-row p-3 gap-4 py-md-5 align-items-center justify-content-center">
                            <div class="list-group pb-15 w-100"><!-- Название нынешней заметки -->
                                <h1 class="note">All tasks</h1>
                                {% for task in tasks %}
                                    <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
                                        <button class="btn__orange rounded-circle">
                                            <div class="orange__circle"></div>
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="checkmate"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5056 9.00958C16.2128 8.71668 15.7379 8.71668 15.445 9.00958L10.6715 13.7831L8.72649 11.8381C8.43359 11.5452 7.95872 11.5452 7.66583 11.8381C7.37294 12.1309 7.37293 12.6058 7.66583 12.8987L10.1407 15.3736C10.297 15.5299 10.5051 15.6028 10.7097 15.5923C10.8889 15.5833 11.0655 15.5104 11.2023 15.3735L16.5056 10.0702C16.7985 9.77735 16.7985 9.30247 16.5056 9.00958Z" fill="currentColor"></path></svg>
                                        </button>
                                        <div class="d-flex gap-2 w-100 justify-content-between">
                                            <div class="task_inner">
                                                <div class="task_header">
                                                    <h6 class="mb-0">{{ task.title }}</h6>
                                                    <!-- Это иконка категории -->
                                                    <h6><span class="badge text-bg-warning">
                                                        {% for category in task.categories.all %}
                                                            {{ category.title }}
                                                        {% endfor %}
                                                    </span></h6>

                                                    <!-- Это иконка с флажком (если задача с приоритетом флажок будет закрашен в желтый цвет) -->
                                                    <div class="task_flag">
                                                        {% if task.is_high_priority %}
                                                            <i class="bi bi-flag-fill"></i>
                                                        {% else %}
                                                            <i class="bi bi-flag"></i>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                


                                                <!-- Содержимый текст -->
                                                <div class="task_text">
                                                    <p class="mb-0 opacity-75">{{ task.text }}</p>
                                                </div>
                                                <!-- Всё это снизу нужно как-то раскидать по ноуту -->
                                                
                                                <!-- Дата, до которой нужно сделать задачу -->
                                                 <div class="task_date">

                                                    <div class="note_path">
                                                        <span>My projects\</span>
                                                        {% if task.project %}
                                                            {{ task.project }}
                                                        {% endif %}
                                                        <span> </span>
                                                    </div>

                                                    {{ task.due_date|date:"d.m" }}  
                                                </div>
                                                
                                                

                                                
                                                <!-- К какому проекту присвоена эта задача (его может и не быть) -->
                                                
                                                
                                                <!-- Категории этой задачи (их может и не быть, а может быть несколько) 
                                                <h6><span class="badge text-bg-warning mt-3">
                                                    {% for category in task.categories.all %}
                                                        {{ category.title }}
                                                    {% endfor %}
                                                </span></h6>-->
                                                

                                            </div>
                                        </div>
                                    </a>
                                {% endfor %}

                                <div id="content_window"> <!-- Сама форма создания новой заметки-->
                                    <div class="list-group">

                                        <div class="close_form_btn"> <!-- Кнопка Закрытия формы заметки-->
                                            <div id="btn_add" onclick="closeWindow()">
                                                <button type="button" aria-hidden="false" data-supports-active-task="true" class="plus_add_button">
                                                    <span class="icon_close" aria-hidden="true">
                                                        <svg width="13" height="13">
                                                            <path fill="currentColor" fill-rule="evenodd" d="M6 6V.5a.5.5 0 0 1 1 0V6h5.5a.5.5 0 1 1 0 1H7v5.5a.5.5 0 1 1-1 0V7H.5a.5.5 0 0 1 0-1H6z">
                                                                
                                                            </path>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </div>
                                        </div>

                                        <form class="note-form">
                                            
                                            <input class="form-control form-control-sm my-2" type="text" placeholder="Note Title" required="" aria-label=".form-control-sm">

                                            <div class="container">
                                                <div class="mb-1">
                                                    <label for="exampleFormControlTextarea1" class="form-label">Note Text</label>
                                                    <textarea class="form-control" id="exampleFormControlTextarea1" required="" rows="3"></textarea>
                                                </div>
                                                




                                                <div class="projets-datalist d-flex">
                                                    <span class=" py-1 mx-3"> Chose project</span>
                                                    <input class="form-control" list="datalistOptions" id="exampleDataList" placeholder="Type to search...">
                                                    <datalist id="datalistOptions">         <!-- Список с нашими проектами-->
                                                        <option value="Project 1">
                                                        <option value="Project 2">
                                                        <option value="Project 3">
                                                        <option value="Project 4">

                                                    </datalist>
                                                </div>
                                            </div>

                                            <div class="categories-datalist d-flex">
                                                <span class=" py-1 mx-3"> Chose category</span>
                                                <input class="form-control" list="datalistOptions" id="exampleDataList" placeholder="Type to search...">
                                                <datalist id="datalistOptions">         <!-- Список с нашими категориями-->
                                                    <option value="Category 1 ">
                                                    <option value="Category 2 ">
                                                    <option value="Category 3 ">
                                                    <option value="Category 4 ">

                                                </datalist>
                                            </div>

                                            <div class="field-due_date my-5">
                                                <div>
                                                    <span>Date:</span>
                                                    <input type="text" name="due_date" class="vDateField" size="10" required="" id="id_due_date" placeholder="2025-01-19">
                                                    <span class="datetimeshortcuts">&nbsp;<a>Today</a>&nbsp;|&nbsp;                            <!--  Кнопка TODAY  -->
                                                        <a  id="calendarlink0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16"> <!-- Календарь  -->
                                                            <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
                                                          </svg>
                                                </div>
                                                
                                            </div>


                                            <div class="form-check text-start my-3">

                                              <input class="form-check-input" type="checkbox" value="remember-me" id="flexCheckDefault">
                                              <label class="form-check-label" for="flexCheckDefault">
                                                High priority
                                              </label>

                                            </div>
                                            <button class="btn btn-primary w-100 py-2" type="submit">Add note</button>

                                          </form>


                    
                                      </div>

                                </div>


                                <div class="plus_add_button_inner">  <!-- Кнопка Добавления новой задачи внутри заметки-->

                                    <div id="btn_add" onclick="showWindow()">
                                        <button type="button" aria-hidden="false" data-supports-active-task="true" class="plus_add_button">
                                            <span class="icon_add" aria-hidden="true">
                                                <svg width="13" height="13">
                                                    <path fill="currentColor" fill-rule="evenodd" d="M6 6V.5a.5.5 0 0 1 1 0V6h5.5a.5.5 0 1 1 0 1H7v5.5a.5.5 0 1 1-1 0V7H.5a.5.5 0 0 1 0-1H6z">
                                                        
                                                    </path>
                                                </svg>
                                            </span>Add note
                                        </button>
                                    </div>

                                    

                                </div>
                            </div>
                        </div>
                    </div>
                </header>
            </div>
        </div>
    </div>

    <script src="static/javascript/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

</body>

</html>